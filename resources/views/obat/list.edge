<tr>
    <td>{{ obat.kd_obat }}</td>
    <td>{{ obat.nm_obat }}</td>
    <td>{{ obat.bentuk_obat }}</td>
    <td>
        {{
            new Date(obat.tgl_prod).toLocaleDateString('id-ID', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            })
        }}
    </td>
    <td>
        @set('tglExp', new Date(obat.tgl_exp).toLocaleDateString('id-ID', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            })
        )
        @if(obat.tgl_exp < new Date())
            <span class="badge bg-danger">
                {{ tglExp }}
            </span>
        @else
        {{ tglExp }}
        @endif
    </td>
    <td>
        {{
            new Intl.NumberFormat('id-ID', {
                style: 'currency',
                currency: 'IDR'
            }).format(obat.harga)
        }}
    </td>
    <td>
        <button type="button" class="btn btn-primary" data-bs-toggle="modal"
        data-bs-target="#modalEditObat" 
        data-nama="{{ obat.nm_obat }}" 
        data-kode="{{ obat.kd_obat }}"
        data-bentuk="{{ obat.bentuk_obat }}"
        data-prod="{{ new Date(obat.tgl_prod).toISOString().slice(0, 10) }}"
        data-exp="{{ new Date(obat.tgl_exp).toISOString().slice(0, 10) }}"
        data-harga="{{ obat.harga }}"
        data-jumlah="{{ obat.persediaan.jumlah }}"
        data-url="{{ route('obat.update', {params: {id: obat.id}}) }}">
            edit detail
        </button>
        <a href="{{ route('obat.destroy', {params: {kode: obat.kd_obat}}) }}" 
        class="btn btn-danger">
            hapus
        </a>
    </td>
</tr>